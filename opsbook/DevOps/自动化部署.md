# 自动化部署
---
人员组织架构, 流程, 工具和技术

项目管理:

流程设计:
* 一键部署 (自动化测试, 灰度发布, 集群的添加和删除节点).
* 一键回退


开发环境, 测试环境(功能测试, 性能测试)

预生产环境(生产环境的一个不对外的节点), 生产环境.

开发提交代码--> 项目负责人 code review -- git release

code -review

前提: 代码已经在发布分支, 进行发布.

1.获取代码 git pull  最新的, commit id, tag
2.编译(可选) build, ant ,maven
3.配置文件 
  - 1. 分环境 (配置单独存放,  config.example) 
  - 2. 统一的, 集群有10个节点. Job 节点 crontab.xml
4. 打包 包名的设计 项目名称, 环境名称, 版本, 时间
5. 分发, 校验
6. 将待部署节点, 从集群中摘除
7. 解压软件包
8. 创建软连接
9. 同步差异配置文件
10. 重启服务
11. 测试验证
12. 加入集群, 


回退

紧急回退
1. 列出版本
2. 回退

正常回退:
重新部署

回退到上一个 正常版本

部署统计, 部署日志

扩展:
  串行,
  分组部署:

  部署服务器双机
  回滚的必要性
